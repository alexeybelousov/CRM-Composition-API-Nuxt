(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{356:function(e,t,r){"use strict";r.r(t);r(35),r(22),r(20),r(13),r(27);var n=r(18),o=(r(12),r(3)),c=r(6),l=r(108);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={fetch:function(e){var t=e.store;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch("records/fetchRecords"),e.next=3,t.dispatch("categories/fetchCategories");case 3:case"end":return e.stop()}}),e)})))()},head:function(){return{title:this.$title("planning-title")}},setup:function(e,t){var r=Object(c.ref)(!0),n=Object(c.computed)((function(){return t.root.$store.getters["records/records"]})),f=Object(c.computed)((function(){return t.root.$store.getters["categories/categories"]})),v=Object(c.computed)((function(){return t.root.$store.getters["userInfo/info"].bill})),O=Object(c.ref)([]);return Object(c.onMounted)(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.value.length){e.next=3;break}return e.next=3,t.root.$store.dispatch("categories/fetchCategories");case 3:if(n.value.length){e.next=6;break}return e.next=6,t.root.$store.dispatch("records/fetchRecords");case 6:r.value=!1,O.value=f.value.map((function(e){var t=n.value.filter((function(t){return t.categoryId===e.id})).filter((function(e){return"outcome"===e.type})).reduce((function(e,t){return e+t.amount}),0),r=100*t/e.limit,o=r>100?100:r,c=r<60?"green":r<100?"yellow":"red",f=e.limit-t,v="".concat(f<0?"Previshenie na":"Ostalos"," ").concat(Object(l.a)(Math.abs(f)));return d({},e,{progressPercent:o,progressColor:c,spend:t,tooltip:v})}));case 8:case"end":return e.stop()}}),e)})))),{loading:r,categories:f,filteredCategories:O,bill:v,store:t.root.$store}}},O=r(9),component=Object(O.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"page-title"},[r("h3",[e._v(e._s(e._f("localize")("planning-title",e.store)))]),e._v(" "),r("h4",[e._v(e._s(e._f("currency")(e.bill,"RUB")))])]),e._v(" "),e.loading?r("Loader"):e.categories.length?r("section",e._l(e.filteredCategories,(function(t){return r("div",{key:t.id},[r("p",[r("strong",[e._v(e._s(t.title)+":")]),e._v("\n        "+e._s(e._f("currency")(t.spend))+" из "+e._s(e._f("currency")(t.limit))+"\n      ")]),e._v(" "),r("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltip,expression:"cat.tooltip"}],staticClass:"progress"},[r("div",{staticClass:"determinate",class:[t.progressColor],style:{width:t.progressPercent+"%"}})])])})),0):r("p",{staticClass:"center"},[e._v("\n    "+e._s(e._f("localize")("planning-categories-not-exist",e.store))+"\n    "),r("router-link",{attrs:{to:"/categories"}},[e._v("\n      "+e._s(e._f("localize")("add-new",e.store))+"\n    ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);