(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{347:function(e,t,r){var map={"./af":219,"./af.js":219,"./ar":220,"./ar-dz":221,"./ar-dz.js":221,"./ar-kw":222,"./ar-kw.js":222,"./ar-ly":223,"./ar-ly.js":223,"./ar-ma":224,"./ar-ma.js":224,"./ar-sa":225,"./ar-sa.js":225,"./ar-tn":226,"./ar-tn.js":226,"./ar.js":220,"./az":227,"./az.js":227,"./be":228,"./be.js":228,"./bg":229,"./bg.js":229,"./bm":230,"./bm.js":230,"./bn":231,"./bn.js":231,"./bo":232,"./bo.js":232,"./br":233,"./br.js":233,"./bs":234,"./bs.js":234,"./ca":235,"./ca.js":235,"./cs":236,"./cs.js":236,"./cv":237,"./cv.js":237,"./cy":238,"./cy.js":238,"./da":239,"./da.js":239,"./de":240,"./de-at":241,"./de-at.js":241,"./de-ch":242,"./de-ch.js":242,"./de.js":240,"./dv":243,"./dv.js":243,"./el":244,"./el.js":244,"./en-SG":245,"./en-SG.js":245,"./en-au":246,"./en-au.js":246,"./en-ca":247,"./en-ca.js":247,"./en-gb":248,"./en-gb.js":248,"./en-ie":249,"./en-ie.js":249,"./en-il":250,"./en-il.js":250,"./en-nz":251,"./en-nz.js":251,"./eo":252,"./eo.js":252,"./es":253,"./es-do":254,"./es-do.js":254,"./es-us":255,"./es-us.js":255,"./es.js":253,"./et":256,"./et.js":256,"./eu":257,"./eu.js":257,"./fa":258,"./fa.js":258,"./fi":259,"./fi.js":259,"./fo":260,"./fo.js":260,"./fr":261,"./fr-ca":262,"./fr-ca.js":262,"./fr-ch":263,"./fr-ch.js":263,"./fr.js":261,"./fy":264,"./fy.js":264,"./ga":265,"./ga.js":265,"./gd":266,"./gd.js":266,"./gl":267,"./gl.js":267,"./gom-latn":268,"./gom-latn.js":268,"./gu":269,"./gu.js":269,"./he":270,"./he.js":270,"./hi":271,"./hi.js":271,"./hr":272,"./hr.js":272,"./hu":273,"./hu.js":273,"./hy-am":274,"./hy-am.js":274,"./id":275,"./id.js":275,"./is":276,"./is.js":276,"./it":277,"./it-ch":278,"./it-ch.js":278,"./it.js":277,"./ja":279,"./ja.js":279,"./jv":280,"./jv.js":280,"./ka":281,"./ka.js":281,"./kk":282,"./kk.js":282,"./km":283,"./km.js":283,"./kn":284,"./kn.js":284,"./ko":285,"./ko.js":285,"./ku":286,"./ku.js":286,"./ky":287,"./ky.js":287,"./lb":288,"./lb.js":288,"./lo":289,"./lo.js":289,"./lt":290,"./lt.js":290,"./lv":291,"./lv.js":291,"./me":292,"./me.js":292,"./mi":293,"./mi.js":293,"./mk":294,"./mk.js":294,"./ml":295,"./ml.js":295,"./mn":296,"./mn.js":296,"./mr":297,"./mr.js":297,"./ms":298,"./ms-my":299,"./ms-my.js":299,"./ms.js":298,"./mt":300,"./mt.js":300,"./my":301,"./my.js":301,"./nb":302,"./nb.js":302,"./ne":303,"./ne.js":303,"./nl":304,"./nl-be":305,"./nl-be.js":305,"./nl.js":304,"./nn":306,"./nn.js":306,"./pa-in":307,"./pa-in.js":307,"./pl":308,"./pl.js":308,"./pt":309,"./pt-br":310,"./pt-br.js":310,"./pt.js":309,"./ro":311,"./ro.js":311,"./ru":312,"./ru.js":312,"./sd":313,"./sd.js":313,"./se":314,"./se.js":314,"./si":315,"./si.js":315,"./sk":316,"./sk.js":316,"./sl":317,"./sl.js":317,"./sq":318,"./sq.js":318,"./sr":319,"./sr-cyrl":320,"./sr-cyrl.js":320,"./sr.js":319,"./ss":321,"./ss.js":321,"./sv":322,"./sv.js":322,"./sw":323,"./sw.js":323,"./ta":324,"./ta.js":324,"./te":325,"./te.js":325,"./tet":326,"./tet.js":326,"./tg":327,"./tg.js":327,"./th":328,"./th.js":328,"./tl-ph":329,"./tl-ph.js":329,"./tlh":330,"./tlh.js":330,"./tr":331,"./tr.js":331,"./tzl":332,"./tzl.js":332,"./tzm":333,"./tzm-latn":334,"./tzm-latn.js":334,"./tzm.js":333,"./ug-cn":335,"./ug-cn.js":335,"./uk":336,"./uk.js":336,"./ur":337,"./ur.js":337,"./uz":338,"./uz-latn":339,"./uz-latn.js":339,"./uz.js":338,"./vi":340,"./vi.js":340,"./x-pseudo":341,"./x-pseudo.js":341,"./yo":342,"./yo.js":342,"./zh-cn":343,"./zh-cn.js":343,"./zh-hk":344,"./zh-hk.js":344,"./zh-tw":345,"./zh-tw.js":345};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}n.keys=function(){return Object.keys(map)},n.resolve=o,e.exports=n,n.id=347},353:function(e,t,r){"use strict";r.r(t);r(35),r(22),r(20),r(13),r(27),r(214);var n=r(18),o=(r(12),r(3)),c=r(6),j={props:{records:{type:Array,require:!0}},setup:function(e,t){return{store:t.root.$store}}},l=r(9),d=Object(l.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("table",[r("thead",[r("tr",[r("th",[e._v("#")]),e._v(" "),r("th",[e._v(e._s(e._f("localize")("amount",e.store)))]),e._v(" "),r("th",[e._v(e._s(e._f("localize")("date",e.store)))]),e._v(" "),r("th",[e._v(e._s(e._f("localize")("categories-title",e.store)))]),e._v(" "),r("th",[e._v(e._s(e._f("localize")("type",e.store)))]),e._v(" "),r("th",[e._v(e._s(e._f("localize")("open",e.store)))])])]),e._v(" "),r("tbody",e._l(e.records,(function(t,n){return r("tr",{key:t.id},[r("td",[e._v(e._s(n+1))]),e._v(" "),r("td",[e._v(e._s(e._f("currency")(t.amount,"RUB")))]),e._v(" "),r("td",[e._v(e._s(e._f("date")(Date.parse(t.date),"datetime")))]),e._v(" "),r("td",[e._v(e._s(t.categoryName))]),e._v(" "),r("td",[r("span",{staticClass:"white-text badge",class:[t.typeClass]},[e._v("\n          "+e._s(t.typeText)+"\n        ")])]),e._v(" "),r("td",[r("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Open record details",expression:"'Open record details'"}],staticClass:"btn-small btn",on:{click:function(r){return e.$router.push("/detail/"+t.id)}}},[r("i",{staticClass:"material-icons"},[e._v("open_in_new")])])])])})),0)])}),[],!1,null,null,null).exports;function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var h={extends:r(350).a,props:{chartData:{type:Object,required:!0},options:{type:Object,default:function(){}}},mounted:function(){this.renderChart(this.chartData,function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({maintainAspectRatio:!1,height:200},this.options))}},v=Object(l.a)(h,void 0,void 0,!1,null,null,null).exports,m=r(32),y=r.n(m);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var k={components:{Chart:v,HistoryTable:d},fetch:function(e){var t=e.store;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch("records/fetchRecords"),e.next=3,t.dispatch("categories/fetchCategories");case 3:case"end":return e.stop()}}),e)})))()},head:function(){return{title:this.$title("history-title")}},setup:function(e,t){var r=function(e){var t=[],r=+e.root.$route.query.page||1,n=Object(c.ref)(r),o=Object(c.ref)([]),j=Object(c.ref)(0);return{initPagination:function(e){t=y.a.chunk(e,5),j.value=y.a.size(t),o.value=t[n.value-1]||t[0]},page:n,items:o,pageCount:j,pageChange:function(r){e.root.$router.push("".concat(e.root.$route.path,"?page=").concat(r)),o.value=t[r-1]||t[0]}}}(t),n=r.initPagination,j=r.page,l=r.items,d=r.pageCount,f=r.pageChange,h=Object(c.ref)(!0),v=Object(c.computed)((function(){return t.root.$store.getters["records/records"]})),m=Object(c.computed)((function(){return t.root.$store.getters["categories/categories"]})),_=Object(c.ref)([]),k=Object(c.reactive)({});return Object(c.onMounted)(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.value.length){e.next=3;break}return e.next=3,t.root.$store.dispatch("categories/fetchCategories");case 3:if(v.value.length){e.next=6;break}return e.next=6,t.root.$store.dispatch("records/fetchRecords");case 6:_.value=v.value.map((function(e){return O({},e,{categoryName:m.value.find((function(t){return t.id===e.categoryId})).title,typeClass:"income"===e.type?"green":"red",typeText:"income"===e.type?" Income":"Outcome"})})),n(_.value),k.labels=m.value.map((function(e){return e.title})),k.datasets=[{label:"Expenses by category",data:m.value.map((function(e){return v.value.reduce((function(t,r){return r.categoryId===e.id&&"outcome"===r.type&&(t+=+r.amount),t}),0)})),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}],h.value=!1;case 11:case"end":return e.stop()}}),e)})))),{loading:h,filteredRecords:_,page:j,items:l,pageCount:d,pageChange:f,chartData:k,store:t.root.$store}}},w=Object(l.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"page-title"},[r("h3",[e._v(e._s(e._f("localize")("history-title",e.store)))])]),e._v(" "),e.loading?e._e():r("div",{staticClass:"history-chart"},[r("Chart",{attrs:{"chart-data":e.chartData,width:300,height:300}})],1),e._v(" "),e.loading?r("Loader"):e.filteredRecords.length?r("section",[r("HistoryTable",{attrs:{records:e.items}}),e._v(" "),r("Paginate",{attrs:{"page-count":e.pageCount,"click-handler":e.pageChange,"prev-text":"<","next-text":">","container-class":"pagination","page-class":"waves-effect"},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1):r("p",{staticClass:"center"},[e._v("\n    "+e._s(e._f("localize")("history-record-not-exist",e.store))+"\n    "),r("router-link",{attrs:{to:"/record"}},[e._v("\n      "+e._s(e._f("localize")("add-new",e.store))+"\n    ")])],1)],1)}),[],!1,null,null,null);t.default=w.exports}}]);